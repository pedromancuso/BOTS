#include <ESP8266WiFi.h>
#include <PubSubClient.h>
#include <EEPROM.h>
#include <WiFiClient.h>
#include <ESP8266WebServer.h>
#include <ESP8266HTTPClient.h> 
#include "WifiSetup.hpp"
#include "mqtt.hpp"
#include "config.h"
extern int wificonectado;
/*WiFiClient espClient;
PubSubClient client(espClient);
ESP8266WebServer server(80);*/
///////////////////////////////SETUP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////SETUP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void setup(){
  wificonectado=0;
  EEPROM.write(0,0);
  Serial.begin(115200);
  pinMode(LED_BUILTIN,OUTPUT);
  digitalWrite(LED_BUILTIN,LOW);
  wifiset();
} 
///////////////////////////////LOOP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////LOOP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void loop(){
  if(wificonectado==1){mqttloop();}
  else if(wificonectado==0){wifiloop();}
}
